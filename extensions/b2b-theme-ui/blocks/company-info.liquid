<div id="shopify-company-app-root"></div>
<link rel="stylesheet" href="https://b2b.dynamicdreamz.com/embed.css">
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script>
  (function() {
    // URL to your embedded script
    // Ensure this matches your deployed app URL
    const scriptUrl = 'https://b2b.dynamicdreamz.com/embed.js';

    const script = document.createElement('script');
    script.src = scriptUrl;
    script.async = true;
    script.onload = function() {
      if (window.ShopifyCompanyApp && window.ShopifyCompanyApp.init) {
        window.ShopifyCompanyApp.init({
          containerId: 'shopify-company-app-root',
          proxyUrl: '/apps/b2b-portal/api/proxy',
          customerId: {{ customer.id | json }},
          shop: {{ shop.permanent_domain | json }}
        });
      }
    };
    document.body.appendChild(script);
  })();
</script>

{% schema %}
{
  "name": "Company App",
  "target": "section",
  "settings": []
}
{% endschema %}
